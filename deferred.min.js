// Generated by CoffeeScript 1.3.1
/*
Simply Deferred - v.1.1.1
(c) 2012 Sudhir Jonathan, contact.me@sudhirjonathan.com
Released under the MIT License.
*/(function(){var a,b,c,d,e,f,g,h,i,j=[].slice;g=(typeof window!="undefined"&&window!==null?window._:void 0)||require("underscore"),b="pending",d="resolved",c="rejected",f=g.flatten,e=function(a,b){var c,d,e,g,h;g=f(a),h=[];for(d=0,e=g.length;d<e;d++)c=g[d],h.push(c.apply(null,b));return h},a=function(){var a,g,h,i,j,k;return k=b,i=[],j=[],a=[],h={},this.promise=function(g){var l;return g=g||{},g.state=function(){return k},l=function(a,c){return function(){return k===b&&c.push.apply(c,f(arguments)),a()&&e(arguments,h),g}},g.done=l(function(){return k===d},i),g.fail=l(function(){return k===c},j),g.always=l(function(){return k!==b},a),g},this.promise(this),g=function(c,d){return function(){return k===b&&(k=c,h=arguments,e([d,a],h)),this}},this.resolve=g(d,i),this.reject=g(c,j),this},i=function(){var b,c,d,e,h,i;e=new a,c=f(arguments),d=g.after(c.length,e.resolve);for(h=0,i=c.length;h<i;h++)b=c[h],b.done(d);return e.promise()},h=function(b){return b.Deferred=function(){return new a},b.ajax=g.wrap(b.ajax,function(b,c){var d,e;return c==null&&(c={}),e=new a,d=function(a,b){return g.wrap(a,function(){var a,c;return c=arguments[0],a=2<=arguments.length?j.call(arguments,1):[],c.apply(null,a),b.apply(null,a)})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject),b(c),e.promise()})},typeof exports!="undefined"?(exports.Deferred=function(){return new a},exports.when=i,exports.installInto=h):(this.Deferred=function(){return new a},this.Deferred.when=i,this.Deferred.installInto=h)}).call(this);